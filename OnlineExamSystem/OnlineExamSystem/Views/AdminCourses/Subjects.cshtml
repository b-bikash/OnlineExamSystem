@model OnlineExamSystem.Models.ViewModels.CourseSubjectsViewModel

@{
    ViewData["Title"] = "Manage Subjects";
}

<h2 class="mb-3">
    Manage Subjects for Course:
    <span class="text-primary">@Model.Course.Name</span>
</h2>

<hr />

<form asp-action="Subjects" method="post">
    @Html.AntiForgeryToken()

    <input type="hidden" name="CourseId" value="@Model.Course.Id" />

    @if (!Model.AllSubjects.Any())
    {
        <div class="alert alert-warning">
            No subjects available. Please create subjects first.
        </div>
    }
    else
    {
        <div class="row">
            @foreach (var subject in Model.AllSubjects)
            {
                <div class="col-md-4 mb-2">
                    <div class="form-check">
                        <input class="form-check-input"
                               type="checkbox"
                               name="SelectedSubjectIds"
                               value="@subject.Id"
                               @(Model.SelectedSubjectIds.Contains(subject.Id) ? "checked" : "") />

                        <label class="form-check-label">
                            @subject.Name
                        </label>
                    </div>
                </div>
            }
        </div>
    }

    <div class="mt-4">
        <button type="submit" class="btn btn-primary">
            Save Subjects
        </button>

        <a asp-action="Index" class="btn btn-secondary ms-2">
            Back to Courses
        </a>
    </div>
</form>