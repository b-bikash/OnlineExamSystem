@model OnlineExamSystem.Models.ViewModels.CourseSubjectsViewModel

<h2>Manage Subjects for @Model.Course.Name</h2>

<form asp-action="Subjects" method="post">
    @Html.AntiForgeryToken()

    <input type="hidden" name="courseId" value="@Model.Course.Id" />

    <!-- ================= ASSIGNED SUBJECTS ================= -->
    <h5 class="mt-3">Assigned Subjects</h5>

    @if (Model.SelectedSubjectIds.Any())
    {
        @foreach (var subject in Model.AllSubjects
            .Where(s => Model.SelectedSubjectIds.Contains(s.Id)))
        {
            <div class="form-check mb-2 p-2 rounded bg-light border border-success">
                <input class="form-check-input"
                       type="checkbox"
                       name="selectedSubjectIds"
                       value="@subject.Id"
                       id="subject_@subject.Id"
                       checked />

                <label class="form-check-label fw-semibold"
                       for="subject_@subject.Id">
                    @subject.Name
                </label>

                <span class="badge bg-success ms-2">
                    Assigned
                </span>
            </div>
        }
    }
    else
    {
        <p class="text-muted fst-italic">
            No subjects assigned yet.
        </p>
    }

    <!-- ================= AVAILABLE SUBJECTS ================= -->
    <h5 class="mt-4">Available Subjects</h5>

    @foreach (var subject in Model.AllSubjects
        .Where(s => !Model.SelectedSubjectIds.Contains(s.Id)))
    {
        <div class="form-check mb-2 p-2 rounded border">
            <input class="form-check-input"
                   type="checkbox"
                   name="selectedSubjectIds"
                   value="@subject.Id"
                   id="subject_@subject.Id" />

            <label class="form-check-label"
                   for="subject_@subject.Id">
                @subject.Name
            </label>
        </div>
    }

    <!-- ================= ACTIONS ================= -->
    <div class="mt-4">
        <button type="submit" class="btn btn-primary">
            Save Subjects
        </button>

        <a asp-action="Index"
           class="btn btn-secondary ms-2">
            Back to Courses
        </a>
    </div>
</form>


