@model OnlineExamSystem.Models.QuestionCreateViewModel

@{
    ViewData["Title"] = "Create Question";
    Layout = "_Layout";
}

<h2>Create Question</h2>

<form asp-action="Create" method="post">
    @Html.AntiForgeryToken()

    <!-- ExamId (fixed, comes from controller) -->
    <input type="hidden" asp-for="ExamId" />

    <!-- Question Text -->
    <div class="form-group">
        <label asp-for="QuestionText">Question</label>
        <textarea asp-for="QuestionText" class="form-control" rows="3"></textarea>
        <span asp-validation-for="QuestionText" class="text-danger"></span>
    </div>

    <!-- Marks -->
    <div class="form-group mt-3">
        <label>Marks</label>
        <input type="number"
               name="Marks"
               class="form-control"
               min="0"
               value="0"
               required />
        <small class="text-muted">
            Enter marks for this question (0 or more).
        </small>
    </div>

    <hr />

    <h4>Options</h4>
    <p class="text-muted">
        Enter 2 to 4 options and select exactly one correct answer.
    </p>

    <!-- Option 1 -->
    <div class="form-group">
        <div class="form-check">
            <input class="form-check-input"
                   type="radio"
                   name="CorrectOptionIndex"
                   value="0" />
            <label class="form-check-label">Correct</label>
        </div>
        <input name="Options[0]" class="form-control" placeholder="Option 1" />
    </div>

    <!-- Option 2 -->
    <div class="form-group">
        <div class="form-check">
            <input class="form-check-input"
                   type="radio"
                   name="CorrectOptionIndex"
                   value="1" />
            <label class="form-check-label">Correct</label>
        </div>
        <input name="Options[1]" class="form-control" placeholder="Option 2" />
    </div>

    <!-- Option 3 -->
    <div class="form-group">
        <div class="form-check">
            <input class="form-check-input"
                   type="radio"
                   name="CorrectOptionIndex"
                   value="2" />
            <label class="form-check-label">Correct</label>
        </div>
        <input name="Options[2]" class="form-control" placeholder="Option 3 (optional)" />
    </div>

    <!-- Option 4 -->
    <div class="form-group">
        <div class="form-check">
            <input class="form-check-input"
                   type="radio"
                   name="CorrectOptionIndex"
                   value="3" />
            <label class="form-check-label">Correct</label>
        </div>
        <input name="Options[3]" class="form-control" placeholder="Option 4 (optional)" />
    </div>

    <!-- Validation summary for option-related errors -->
    <div class="text-danger">
        @Html.ValidationSummary(false)
    </div>

    <br />

    <button type="submit" class="btn btn-success">Save Question</button>
    <a asp-action="Index" asp-route-examId="@Model.ExamId" class="btn btn-secondary">
        Cancel
    </a>
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
